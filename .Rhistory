<<<<<<< HEAD
return(result)
}
my.birthday <- as.Date('2018-08-28')
my.bday.intro <- MakeBirthdayIntro(my.name, my.age, my.birthday)
print(my.bday.intro)
# Luxi Zheng
# INFO 201 AE
# 01/10/2018
# install.packages(stringr)
library("stringr")
#################
#### PART 1 #####
#################
# save my age and name to two variables
my.age <- 19
my.name <- "Luxi"
# This is a function named "MakeItroduction" that takes in two arguments:
# name and age. It will return a full introduction sentence
MakeIntroduction <- function(name, age) {
result <- paste("Hello, my name is", name, "and I'm", age, "years old.")
return(result)
}
# create a variable to store the introduction and print it
my.intro <- MakeIntroduction(my.name, my.age)
print(my.intro)
# replace "Hello, my name is" with "Hey, I'm" and print it
casual.intro <- sub("Hello, my name is", "Hey, I'm", my.intro)
print(casual.intro)
# capitalize each word in the intro and print it
capital.intro <- str_to_title(my.intro)
print(capital.intro)
# count how many times "e" appears in my.intro and print it
intro.e.count <- str_count(my.intro, "e")
print(intro.e.count)
#################
#### PART 2 #####
#################
# create a vector of 6 book names and print it
books <- c("The Night Circus", "Ship of Theseus", "Flow Magazine", "Harry Potter", "Everyday Matters", "An Illustrated Journey")
print(books)
# the first three books from the variable books and print it
top.three.books <- books[c(1:3)]
print(top.three.books)
# create book reviews that has the phrase "is a great read!" at the end of each element in books
# then print them
book.reviews <- paste(books, "is a great read!")
print(book.reviews)
# This is a function called RemoveBook that takes two arguments:
# a vector of book titles and an index number
# this function will return a vector that contains the given book titles, but with title at the given index removed
RemoveBook <- function(titles, index) {
result <- titles[-index]
return(result)
}
# use the RemoveBook function to remove the 4th book in books and print
books.without.four <- RemoveBook(books, 4)
print(books.without.four)
# create a variable that contains only the elements in books vector whose title is longer than 15 characters
# and then print them
title.lenghts <- nchar(books)
is.long <- title.lenghts > 15
long.titles <- books[is.long]
print(long.titles)
#################
#### PART 3 #####
#################
#
numbers <- 1:201
squared.numbers <- numbers * numbers
squared.mean <- mean(squared.numbers)
print(squared.mean)
is.square <- sqrt(numbers) == round(sqrt(numbers))
squares <- numbers[is.square]
print(squares)
#################
#### PART 4 #####
#################
#
spring.break <- as.Date("2018-03-17")
today <- Sys.Date()
days.to.break <- spring.break - today
print(days.to.break)
# dates <- as.Date(c('2008-01-01','2009-03-02'))
# tmp <- as.POSIXlt(dates)
# tmp$year <- tmp$year+1
# dates2 <- as.Date(tmp)
MakeBirthdayIntro <- function(name, age, birthday) {
days.till.bday <- birthday - today
if (days.till.bday < 0) {
temp <- as.POSIXlt(birthday)
temp$year <- temp$year + 1
new.birthday <- as.Date(temp)
days.till.bday <- new.birthday - today
}
result <- paste(MakeIntroduction(my.name, my.age), "In", days.till.bday, "days I'll be", my.age + 1)
return(result)
}
my.birthday <- as.Date('2018-08-28')
my.bday.intro <- MakeBirthdayIntro(my.name, my.age, my.birthday)
print(my.bday.intro)
# Luxi Zheng
# INFO 201 AE
# 01/10/2018
# install.packages(stringr)
library("stringr")
#################
#### PART 1 #####
#################
# make introduction
my.age <- 19
my.name <- "Luxi"
# This is a function named "MakeItroduction" that takes in two arguments:
# name and age. It will return a full introduction sentence
MakeIntroduction <- function(name, age) {
result <- paste("Hello, my name is", name, "and I'm", age, "years old.")
return(result)
}
my.intro <- MakeIntroduction(my.name, my.age)
print(my.intro)
# replace "Hello, my name is" with "Hey, I'm" and print it
casual.intro <- sub("Hello, my name is", "Hey, I'm", my.intro)
print(casual.intro)
capital.intro <- str_to_title(my.intro)
print(capital.intro)
intro.e.count <- str_count(my.intro, "e")
print(intro.e.count)
#################
#### PART 2 #####
#################
# create book titles and reviews
books <- c("The Night Circus", "Ship of Theseus", "Flow Magazine", "Harry Potter", "Everyday Matters", "An Illustrated Journey")
print(books)
top.three.books <- books[c(1:3)]
print(top.three.books)
book.reviews <- paste(books, "is a great read!")
print(book.reviews)
# This is a function called RemoveBook that takes two arguments:
# a vector of book titles and an index number
# this function will return a vector that contains the given book titles, but with title at the given index removed
RemoveBook <- function(titles, index) {
result <- titles[-index]
return(result)
}
books.without.four <- RemoveBook(books, 4)
print(books.without.four)
# print elements whose title is longer than 15 characters
title.lenghts <- nchar(books)
is.long <- title.lenghts > 15
long.titles <- books[is.long]
print(long.titles)
#################
#### PART 3 #####
#################
# do some calculations
numbers <- 1:201
squared.numbers <- numbers * numbers
squared.mean <- mean(squared.numbers)
print(squared.mean)
is.square <- sqrt(numbers) == round(sqrt(numbers))
squares <- numbers[is.square]
print(squares)
#################
#### PART 4 #####
#################
# calculate a person's birthday and modify introduction
spring.break <- as.Date("2018-03-17")
today <- Sys.Date()
days.to.break <- spring.break - today
print(days.to.break)
# This function modifies the old introduction.
# the new introduction will incude the birthday, days till bday, and new age
MakeBirthdayIntro <- function(name, age, birthday) {
days.till.bday <- birthday - today
if (days.till.bday < 0) {
temp <- as.POSIXlt(birthday)
temp$year <- temp$year + 1
new.birthday <- as.Date(temp)
days.till.bday <- new.birthday - today
}
result <- paste(MakeIntroduction(my.name, my.age), "In", days.till.bday, "days I'll be", my.age + 1)
return(result)
}
my.birthday <- as.Date('2018-08-28')
my.bday.intro <- MakeBirthdayIntro(my.name, my.age, my.birthday)
print(my.bday.intro)
source('~/Desktop/INFO 201/a2-core-skills-luxizheng/Assignment.R')
shiny::runApp('Desktop/INFO 201/a7-data-app-luxizheng')
=======
mutate(time = time / 3600)
total.halo.stats <- mutate(total.halo.stats, time = as.duration(TotalTimePlayed))
total.halo.stats[1,1]
total.halo.stats[,1]
total.halo.stats[1,]
total.halo.stats <- mutate(total.halo.stats, time = as.duration(TotalTimePlayed) /3600)
total.halo.stats[1,]
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
total.halo.stats <- mutate(total.halo.stats, time = as.numeric(as.duration(TotalTimePlayed), hours))
getwd()
source('D:/Desktop/Info 201/assignments/INFO201_FINAL_BVO/script_final.R', echo=TRUE)
halo.stats3 <- GetStats(65,96)
halo.stats4 <- GetStats(97, 128)
source("scipt_final.R")
source("scipt_final.R")
source("script_final.R")
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
total.halo.stats <- mutate(total.halo.stats, time = as.double(as.duration(TotalTimePlayed)))
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
total.halo.stats <- mutate(total.halo.stats, time = round(as.double(as.duration(TotalTimePlayed)) / 3600))
View(playlists)
>>>>>>> top+player+service+history
# Luxi Zheng
library("shiny")
library("rlang")
library("httr")
#install.packages("lubridate")
library("dplyr")
library("tidyr")
library("ggplot2")
library("stringr")
library("jsonlite")
library("lubridate")
source("api_key.R")
###################################################
########## Process the data #######################
###################################################
# to get a list of playlists that are ranked and active so we know
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
# team arena's id c98949ae-60a8-43dc-85d7-0feb0b92e719
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- latest.finished.season.id[1, 1]
# the most recent finished season id f7b4e7b4-8f70-431d-b604-d13cffff1114
base.uri <- "https://www.haloapi.com/stats/h5/player-leaderboards/csr/"
# resource {seasonId}/{playlistId}
resource.uri <- paste0(latest.finished.season.id, "/c98949ae-60a8-43dc-85d7-0feb0b92e719")
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
leaders <- response$Results %>%
flatten()
# service information of top players
base.uri.stats <- "https://www.haloapi.com/stats/"
arena.columns <- c("TotalKills", "TotalDeaths", "TotalShotsFired",
"TotalShotsLanded", "TotalMeleeKills", "TotalGrenadeKills",
"TotalTimePlayed","TotalGamesCompleted", "TotalGamesWon",
"TotalGamesLost","TotalGamesTied")
GetStats <- function(rank1, rank2) {
player.ids <- leaders$Player.Gamertag
player.ids <- player.ids[rank1:rank2]
nospace.ids <- paste0(player.ids, collapse = ",")
nospace.ids <- gsub(" ", "+", nospace.ids)
resource.stats <- paste0("h5/servicerecords/arena?players=", nospace.ids,"&seasonId=", latest.finished.season.id)
uri.stats <- paste0(base.uri.stats, resource.stats)
halo.stats <- GET(uri.stats, add_headers("Ocp-Apim-Subscription-Key" = api.key)) %>%
content("text") %>%
fromJSON()
halo.frame <- data.frame(halo.stats$Results)
halo.frame1 <- halo.frame$Result$ArenaStats$ArenaPlaylistStats
team.arena.stats <- data.frame(halo.frame1[[1]]) %>%
flatten()
team.arena.stats <- filter(team.arena.stats, PlaylistId == "5c9808b0-03a3-4577-b966-7217f9dda52d")
for(i in 2:(rank2 - rank1 +1)) {
x <- data.frame(halo.frame1[[i]]) %>%
flatten()
x <- filter(x, PlaylistId == "5c9808b0-03a3-4577-b966-7217f9dda52d")
team.arena.stats <- rbind(team.arena.stats, x)
}
team.arena.stats1 <- select(team.arena.stats, arena.columns)
leaders.counted <- leaders[rank1:rank2,]
team.arena.stats1 <- cbind(player.ids, rank = leaders.counted$Rank, team.arena.stats1, xp = halo.frame$Result$Xp)
}
halo.stats1 <- GetStats(1,32)
halo.stats2 <- GetStats(33,64)
halo.stats3 <- GetStats(65,96)
halo.stats4 <- GetStats(97, 128)
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
total.halo.stats <- mutate(total.halo.stats, time = round(as.double(as.duration(TotalTimePlayed)) / 3600))
write.csv()
source('D:/Desktop/Info 201/assignments/INFO201_FINAL_BVO/script_final.R', echo=TRUE)
View(total.halo.stats)
getwd()
write.csv(total.halo.stats, "INFO201_FINAL_BVO/data")
write.csv(total.halo.stats, "INFO201_FINAL_BVO/data")
write.csv(total.halo.stats, file = "INFO201_FINAL_BVO/data/halo.stats.csv")
write.csv(total.halo.stats, file = "data/halo.stats.csv")
# Luxi Zheng
library("shiny")
library("rlang")
library("httr")
#install.packages("lubridate")
library("dplyr")
library("tidyr")
library("ggplot2")
library("stringr")
library("jsonlite")
library("lubridate")
source("api_key.R")
###################################################
########## Process the data #######################
###################################################
# to get a list of playlists that are ranked and active so we know
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
# team arena's id c98949ae-60a8-43dc-85d7-0feb0b92e719
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- latest.finished.season.id[1, 1]
# the most recent finished season id f7b4e7b4-8f70-431d-b604-d13cffff1114
base.uri <- "https://www.haloapi.com/stats/h5/player-leaderboards/csr/"
# resource {seasonId}/{playlistId}
resource.uri <- paste0(latest.finished.season.id, "/5c9808b0-03a3-4577-b966-7217f9dda52d")
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
leaders <- response$Results %>%
flatten()
# service information of top players
base.uri.stats <- "https://www.haloapi.com/stats/"
arena.columns <- c("TotalKills", "TotalDeaths", "TotalShotsFired",
"TotalShotsLanded", "TotalMeleeKills", "TotalGrenadeKills",
"TotalTimePlayed","TotalGamesCompleted", "TotalGamesWon",
"TotalGamesLost","TotalGamesTied")
GetStats <- function(rank1, rank2) {
player.ids <- leaders$Player.Gamertag
player.ids <- player.ids[rank1:rank2]
nospace.ids <- paste0(player.ids, collapse = ",")
nospace.ids <- gsub(" ", "+", nospace.ids)
resource.stats <- paste0("h5/servicerecords/arena?players=", nospace.ids,"&seasonId=", latest.finished.season.id)
uri.stats <- paste0(base.uri.stats, resource.stats)
halo.stats <- GET(uri.stats, add_headers("Ocp-Apim-Subscription-Key" = api.key)) %>%
content("text") %>%
fromJSON()
halo.frame <- data.frame(halo.stats$Results)
halo.frame1 <- halo.frame$Result$ArenaStats$ArenaPlaylistStats
team.arena.stats <- data.frame(halo.frame1[[1]]) %>%
flatten()
team.arena.stats <- filter(team.arena.stats, PlaylistId == "5c9808b0-03a3-4577-b966-7217f9dda52d")
for(i in 2:(rank2 - rank1 +1)) {
x <- data.frame(halo.frame1[[i]]) %>%
flatten()
x <- filter(x, PlaylistId == "5c9808b0-03a3-4577-b966-7217f9dda52d")
team.arena.stats <- rbind(team.arena.stats, x)
}
team.arena.stats1 <- select(team.arena.stats, arena.columns)
leaders.counted <- leaders[rank1:rank2,]
team.arena.stats1 <- cbind(player.ids, rank = leaders.counted$Rank, team.arena.stats1, xp = halo.frame$Result$Xp)
}
halo.stats1 <- GetStats(1,32)
halo.stats2 <- GetStats(33,64)
halo.stats3 <- GetStats(65,96)
halo.stats4 <- GetStats(97, 128)
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
total.halo.stats <- mutate(total.halo.stats, time(h) = round(as.double(as.duration(TotalTimePlayed)) / 3600))
write.csv(total.halo.stats, file = "data/halo.stats.csv")
View(total.halo.stats)
total.halo.stats <- mutate(total.halo.stats, "time(h)" = round(as.double(as.duration(TotalTimePlayed)) / 3600))
write.csv(total.halo.stats, file = "data/halo.stats.csv")
shiny::runApp()
runApp()
shiny::runApp()
halo.stats <- read.csv("data/halo.stats.csv", stringsAsFactors = FALSE)
runApp()
runApp()
runApp()
runApp()
runApp()
# Luxi Zheng
library("shiny")
library("rlang")
library("httr")
#install.packages("lubridate")
library("dplyr")
library("tidyr")
library("ggplot2")
library("stringr")
library("jsonlite")
library("lubridate")
source("api_key.R")
###################################################
########## Process the data #######################
###################################################
# to get a list of playlists that are ranked and active so we know
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
# team arena's id c98949ae-60a8-43dc-85d7-0feb0b92e719
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- latest.finished.season.id[1, 1]
# the most recent finished season id f7b4e7b4-8f70-431d-b604-d13cffff1114
base.uri <- "https://www.haloapi.com/stats/h5/player-leaderboards/csr/"
# resource {seasonId}/{playlistId}
resource.uri <- paste0(latest.finished.season.id, "/5c9808b0-03a3-4577-b966-7217f9dda52d")
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
leaders <- response$Results %>%
flatten()
# service information of top players
base.uri.stats <- "https://www.haloapi.com/stats/"
arena.columns <- c("TotalKills", "TotalDeaths", "TotalShotsFired",
"TotalShotsLanded", "TotalMeleeKills", "TotalGrenadeKills",
"TotalTimePlayed","TotalGamesCompleted", "TotalGamesWon",
"TotalGamesLost","TotalGamesTied")
GetStats <- function(rank1, rank2) {
player.ids <- leaders$Player.Gamertag
player.ids <- player.ids[rank1:rank2]
nospace.ids <- paste0(player.ids, collapse = ",")
nospace.ids <- gsub(" ", "+", nospace.ids)
resource.stats <- paste0("h5/servicerecords/arena?players=", nospace.ids,"&seasonId=", latest.finished.season.id)
uri.stats <- paste0(base.uri.stats, resource.stats)
halo.stats <- GET(uri.stats, add_headers("Ocp-Apim-Subscription-Key" = api.key)) %>%
content("text") %>%
fromJSON()
halo.frame <- data.frame(halo.stats$Results)
halo.frame1 <- halo.frame$Result$ArenaStats$ArenaPlaylistStats
team.arena.stats <- data.frame(halo.frame1[[1]]) %>%
flatten()
team.arena.stats <- filter(team.arena.stats, PlaylistId == "5c9808b0-03a3-4577-b966-7217f9dda52d")
for(i in 2:(rank2 - rank1 +1)) {
x <- data.frame(halo.frame1[[i]]) %>%
flatten()
x <- filter(x, PlaylistId == "5c9808b0-03a3-4577-b966-7217f9dda52d")
team.arena.stats <- rbind(team.arena.stats, x)
}
team.arena.stats1 <- select(team.arena.stats, arena.columns)
leaders.counted <- leaders[rank1:rank2,]
team.arena.stats1 <- cbind(player.ids, rank = leaders.counted$Rank, team.arena.stats1, xp = halo.frame$Result$Xp)
}
halo.stats1 <- GetStats(1,32)
halo.stats2 <- GetStats(33,64)
halo.stats3 <- GetStats(65,96)
halo.stats4 <- GetStats(97, 128)
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
total.halo.stats <- mutate(total.halo.stats, HoursPlayed = round(as.double(as.duration(TotalTimePlayed)) / 3600))
write.csv(total.halo.stats, file = "data/halo.stats.csv")
View(total.halo.stats)
halo.stats <- read.csv("data/halo.stats.csv", stringsAsFactors = FALSE)
View(halo.stats)
View(halo.stats)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp('D:/Desktop/Info 201/assignments/a7-data-app-baovo615')
runApp()
source('D:/Desktop/Info 201/assignments/INFO201_FINAL_BVO/script_final.R', echo=TRUE)
View(total.halo.stats)
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
total.halo.stats <- mutate(total.halo.stats, HoursPlayed = round(as.double(as.duration(TotalTimePlayed)) / 3600)) %>%
mutate(W/L_Per = TotalGamesWon / TotalGamesCompleted)
total.halo.stats <- mutate(total.halo.stats, HoursPlayed = round(as.double(as.duration(TotalTimePlayed)) / 3600)) %>%
mutate(W/L = TotalGamesWon / TotalGamesCompleted)
total.halo.stats <- mutate(total.halo.stats, HoursPlayed = round(as.double(as.duration(TotalTimePlayed)) / 3600)) %>%
mutate(WinPercent = TotalGamesWon / TotalGamesCompleted)
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
total.halo.stats <- mutate(total.halo.stats, HoursPlayed = round(as.double(as.duration(TotalTimePlayed)) / 3600)) %>%
mutate(WinPercent = round(TotalGamesWon / TotalGamesCompleted * 100))
write.csv(total.halo.stats, file = "data/halo.stats.csv")
halo.stats <- read.csv("data/halo.stats.csv", stringsAsFactors = FALSE)
View(halo.stats)
runApp()
View(halo.stats)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
library("rcconnect")
library("rconnect")
library("rsconnect")
runApp()
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
# team arena's id c98949ae-60a8-43dc-85d7-0feb0b92e719
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- latest.finished.season.id[1, 1]
# the most recent finished season id f7b4e7b4-8f70-431d-b604-d13cffff1114
base.uri <- "https://www.haloapi.com/stats/h5/player-leaderboards/csr/"
# to get a list of playlists that are ranked and active so we know
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
# team arena's id c98949ae-60a8-43dc-85d7-0feb0b92e719
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- latest.finished.season.id[1]
latest.finished.season.id <- latest.finished.season.id[1,1]
runApp()
library("shiny")
library("rlang")
library("httr")
# install.packages("tidyr")
library("dplyr")
install.packages("tidyr")
#install.packages("tidyr")
library("dplyr")
library("tidyr")
library("ggplot2")
library("stringr")
library("jsonlite")
source("apikey.R")
setwd("~/Desktop/INFO201/INFO201_FINAL_BVO")
source("apikey.R")
###################################################
########## Process the data #######################
###################################################
# to get a list of playlists that are ranked and active so we know
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
base.uri <- "https://www.haloapi.com/stats/h5/player-leaderboards/csr/"
# resource {seasonId}/{playlistId}
resource.uri <- paste0(latest.finished.season.id, "/c98949ae-60a8-43dc-85d7-0feb0b92e719")
uri <- paste0(base.uri, resource.uri)
# resource {seasonId}/{playlistId}
resource.uri <- paste0(latest.finished.season.id, "/c98949ae-60a8-43dc-85d7-0feb0b92e719")
latest.finished.season.id <- latest.finished.season.id[1, 1]
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
runApp()
# Define UI for application that draws a histogram
my.ui <- fluidPage(
# Application title
titlePanel("HALO 5"),
h4("By: Luxi Zheng \n02/23/2018"),
# Sidebar with a slider input for number of bins
sidebarLayout(
sidebarPanel(
checkboxGroupInput('playlists',
'Playlists:',
1998:2014, selected = c(2000, 2010)),
sliderInput("range",
"Range of ranked players: ",
min = 0,
max = 250,
value = c(0, 100)),
width = 3
),
# create the different tabs plus text to go along with each tab
mainPanel()
)
)
shinyUI(my.ui)
View(response)
View(seasons)
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
View(response)
api.key <- "138ecd0316d44148b93ed486085b2166"
source("apikey.R")
###################################################
########## Process the data #######################
###################################################
# to get a list of playlists that are ranked and active so we know
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
View(response)
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
View(playlists)
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- latest.finished.season.id[1, 1]
View(seasons)
base.uri <- "https://www.haloapi.com/stats/h5/player-leaderboards/csr/"
# resource {seasonId}/{playlistId}
resource.uri <- paste0(latest.finished.season.id,
"/5c9808b0-03a3-4577-b966-7217f9dda52d")
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
<<<<<<< HEAD
leaders <- response$Results
View(leaders)
View(seasons)
View(seasons)
View(playlists)
runApp()
getwd()
View(leaders)
View(leaders)
base.uri <- "https://www.haloapi.com/stats/h5/players/"
resource.uri <- "Naded/matches[arena][1][1]"
#player}/matches[?modes][&start][&count]
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
library("shiny")
library("rlang")
library("httr")
#install.packages("tidyr")
library("dplyr")
library("tidyr")
#install.packages("tidyr")
library("dplyr")
library("ggplot2")
library("stringr")
library("jsonlite")
source("apikey.R")
#player}/matches[?modes][&start][&count]
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
response <- fromJSON(content(response, "text"))
View(response)
resource.uri <- "Naded/matches[arena]"
#player}/matches[?modes][&start][&count]
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
View(response)
resource.uri <- "Naded/matches"
#player}/matches[?modes][&start][&count]
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
View(response)
View(response)
resource.uri <- "Naded/matches"
base.uri <- "https://www.haloapi.com/stats/h5/players/"
resource.uri <- "Naded/matches"
#player}/matches[?modes][&start][&count]
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
resource.uri <- "Naded/matches/arena"
#player}/matches[?modes][&start][&count]
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
print(api.key)
runApp()
response <- fromJSON(content(response, "text"))
base.uri <- "https://www.haloapi.com/stats/h5/players/"
resource.uri <- "Naded/matches?modes=arena"
#player}/matches[?modes][&start][&count]
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
View(response)
match.id <- response$Results
View(match.id)
print(match.id$Id)
#call to get the results from players in a specific match
base.uri <- "https://www.haloapi.com/stats/h5/arena/matches/"
#matchID
resource.uri <- "ce9a15c4-a62e-4ab1-b5f3-af52871287c6"
uri <- paste0(base.uri,resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
arena.results <- response$Results
View(response)
arena.results <- response$PlayerStats
View(arena.results)
=======
leaders <- response$Results %>%
flatten()
source('D:/Desktop/Info 201/assignments/INFO201_FINAL_BVO/script_final.R', echo=TRUE)
View(seasons)
halo.stats5 <- GetStats(1,32, season.id2)
View(halo.stats5)
View(halo.stats1)
print(latest.finished.season.id)
# resource {seasonId}/{playlistId}
GetLeaders <- function(seasonid) {
resource.uri <- paste0(seasonid,
"/5c9808b0-03a3-4577-b966-7217f9dda52d")
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
leaders <- response$Results %>%
flatten()
}
# function that creats a data from of up to 32 top players
# takes 2 arguements which are the range of a higher ranked player to a lower
# rank (the highest being rank 1)
GetStats <- function(rank1, rank2, seasonid, leader) {
# preparing string of players to request from api
player.ids <- leader$Player.Gamertag
player.ids <- player.ids[rank1:rank2]
nospace.ids <- paste0(player.ids, collapse = ",")
nospace.ids <- gsub(" ", "+", nospace.ids)
# Requesting from halo api and generating a dataframe
resource.stats <- paste0("h5/servicerecords/arena?players=", nospace.ids,
"&seasonId=", seasonid)
uri.stats <- paste0(base.uri.stats, resource.stats)
halo.stats <- GET(uri.stats, add_headers("Ocp-Apim-Subscription-Key" =
api.key)) %>%
content("text") %>%
fromJSON()
halo.frame <- data.frame(halo.stats$Results)
halo.frame1 <- halo.frame$Result$ArenaStats$ArenaPlaylistStats
team.arena.stats <- data.frame(halo.frame1[[1]]) %>%
flatten()
team.arena.stats <- filter(team.arena.stats, PlaylistId ==
"5c9808b0-03a3-4577-b966-7217f9dda52d")
# for loop to get data from nested list into a data frame
for(i in 2:(rank2 - rank1 +1)) {
x <- data.frame(halo.frame1[[i]]) %>%
flatten()
x <- filter(x, PlaylistId == "5c9808b0-03a3-4577-b966-7217f9dda52d")
team.arena.stats <- rbind(team.arena.stats, x)
}
# add additional columns to dataframe
team.arena.stats1 <- select(team.arena.stats, arena.columns)
leaders.counted <- leaders[rank1:rank2,]
team.arena.stats1 <- cbind(player.ids, rank = leaders.counted$Rank,
team.arena.stats1, xp = halo.frame$Result$Xp)
}
halo.stats5 <- GetStats(1,32, season.id2, GetLeaders(season.id2))
season.id2 <- "f7b4e7b4-8f70-431d-b604-d13cffff1114"
halo.stats5 <- GetStats(1,32, season.id2, GetLeaders(season.id2))
View(halo.stats5)
halo.stats6 <- GetStats(33,64, season.id2, GetLeaders(season.id2))
halo.stats7 <- GetStats(65,96, season.id2, GetLeaders(season.id2))
halo.stats8 <- GetStats(97, 128, season.id2, GetLeaders(season.id2))
total.halo.stats1 <- rbind(halo.stats5, halo.stats6, halo.stats7, halo.stats8)
total.halo.stats1 <- mutate(total.halo.stats1,
HoursPlayed =
round(as.double(as.duration(TotalTimePlayed)) /
3600)) %>%
mutate(WinPercent = round(TotalGamesWon / TotalGamesCompleted * 100))
write.csv(total.halo.stats, file = "data/halo.stats1.csv")
View(total.halo.stats1)
halo.stats1 <- read.csv("data/halo.stats1.csv", stringsAsFactors = FALSE)
runApp()
runApp()
halo.stats <- read.csv("data/halo.stats.csv", stringsAsFactors = FALSE)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
library("shiny")
library("rlang")
library("httr")
library("dplyr")
library("tidyr")
library("ggplot2")
library("rsconnect")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
total.halo.stats1 <- mutate(total.halo.stats1,
HoursPlayed =
round(as.double(as.duration(TotalTimePlayed)) /
3600)) %>%
mutate(WinPercent = round(TotalGamesWon / TotalGamesCompleted * 100)) %>%
mutate(Accuracy = round(TotalShotsLanded / TotalShotsFired * 100))
# translating totaltime into something readable
total.halo.stats <- mutate(total.halo.stats,
HoursPlayed =
round(as.double(as.duration(TotalTimePlayed)) /
3600)) %>%
mutate(WinPercent = round(TotalGamesWon / TotalGamesCompleted * 100)) %>%
mutate(Accuracy = round(TotalShotsLanded / TotalShotsFired * 100))
View(total.halo.stats)
total.halo.stats <- rbind(halo.stats1, halo.stats2, halo.stats3, halo.stats4)
source('D:/Desktop/Info 201/assignments/INFO201_FINAL_BVO/script_final.R', echo=TRUE)
source('D:/Desktop/Info 201/assignments/INFO201_FINAL_BVO/script_final.R', echo=TRUE)
View(halo.stats1)
View(halo.stats1)
View(halo.stats5)
View(total.halo.stats)
halo.data <- read.csv("data/halo.data.csv", stringsAsFactors = FALSE)
halo.data1 <- read.csv("data/halo.data1.csv", stringsAsFactors = FALSE)
View(halo.data)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
>>>>>>> top+player+service+history
