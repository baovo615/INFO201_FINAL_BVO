children.num <- sum(children$Freq)
#6. Printing the row which overall has the largest number of losses in the Titanic
# Data frame.
largest.num.of.losses <- Titanic[Titanic$Survived = "No" & Tiatnic$Freq == max(Tiatnic$Freq),]
#6. Printing the row which overall has the largest number of losses in the Titanic
# Data frame.
largest.num.of.losses <- Titanic[Titanic$Survived == "No" & Tiatnic$Freq == max(Tiatnic$Freq)]
#6. Printing the row which overall has the largest number of losses in the Titanic
# Data frame.
largest.num.of.losses <- Titanic[Titanic$Survived == "No" & Titanic$Freq == max(Titanic$Freq),]
View(largest.num.of.losses)
smallest.num.of.losses <- Titanic[Titanic$Survived == "No" & Titanic$Freq == min(Titanic$Freq),]
View(smallest.num.of.losses)
View(smallest.num.of.losses)
smallest.num.of.losses <- NULL
rbind()?
?rbind()
#8. SurvivalRate Function
SurvivalRate <- function(ticket.class) {
#defining what ticket class is
passengers.per.class <- Titanic[Titanic$Class == ticket.class]
#next I'm going to get the total number of adult men in the ship
total.num.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult",]
#get the sum of men
sum.of.men <- sum(total.num.men$Freq)
#Now do the same thing for women
total.num.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult",]
sum.of.women <- sum(total.num.women$Freq)
#Now for children
total.num.children <- passengers.per.class[passengers.per.class$Age = "Child",]
#To get the total number of women and children, I'm going to use the rbind
#function in R to add the two rows.
total.num.women.and.children <- rbind(total.num.women, total.num.children)
#sum of total num of women and children
sum.women.and.children <- sum(total.num.women.and.children$Freq)
#Now I'm going to calculate the number of men, women and children who survived
survived.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.men.sum <- sum(survived.men$Freq)
survived.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.women.sum <- sum(survived.women$Freq)
survived.children <- passengers.per.class[passengers.per.class$Age == "Child"
& passengers.per.class$Survived == "Yes",]
survived.children.sum <- sum(survived.children$Freq)
survived.women.children <- rbind(survived.women, survived.children)
survived.women.children.sum <- sum(survived.women.children$Freq)
#Now to calculate the survival rate of men, women and children
survival.rate.men <- round(survived.men.sum / sum.of.men * 100)
survival.rate.women.children <- round(survived.women.children.sum / sum.women.and.children * 100)
return(paste("Of", ticket.class, " class ", survival.rate.women.children, "% of women and children
survived and, ", survival.rate.men, "% of men survived"))
}
#8. SurvivalRate Function
SurvivalRate <- function(ticket.class) {
#defining what ticket class is
passengers.per.class <- Titanic[Titanic$Class == ticket.class]
#next I'm going to get the total number of adult men in the ship
total.num.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult",]
#get the sum of men
sum.of.men <- sum(total.num.men$Freq)
#Now do the same thing for women
total.num.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult",]
sum.of.women <- sum(total.num.women$Freq)
#Now for children
total.num.children <- passengers.per.class[passengers.per.class$Age == "Child",]
#To get the total number of women and children, I'm going to use the rbind
#function in R to add the two rows.
total.num.women.and.children <- rbind(total.num.women, total.num.children)
#sum of total num of women and children
sum.women.and.children <- sum(total.num.women.and.children$Freq)
#Now I'm going to calculate the number of men, women and children who survived
survived.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.men.sum <- sum(survived.men$Freq)
survived.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.women.sum <- sum(survived.women$Freq)
survived.children <- passengers.per.class[passengers.per.class$Age == "Child"
& passengers.per.class$Survived == "Yes",]
survived.children.sum <- sum(survived.children$Freq)
survived.women.children <- rbind(survived.women, survived.children)
survived.women.children.sum <- sum(survived.women.children$Freq)
#Now to calculate the survival rate of men, women and children
survival.rate.men <- round(survived.men.sum / sum.of.men * 100)
survival.rate.women.children <- round(survived.women.children.sum / sum.women.and.children * 100)
return(paste("Of", ticket.class, " class ", survival.rate.women.children, "% of women and children
survived and, ", survival.rate.men, "% of men survived"))
}
SurvivalRate("Crew")
SurvivalRate("1st")
#8. SurvivalRate Function
SurvivalRate <- function(ticket.class) {
#defining what ticket class is
passengers.per.class <- Titanic[Titanic$Class == ticket.class,]
#next I'm going to get the total number of adult men in the ship
total.num.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult",]
#get the sum of men
sum.of.men <- sum(total.num.men$Freq)
#Now do the same thing for women
total.num.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult",]
sum.of.women <- sum(total.num.women$Freq)
#Now for children
total.num.children <- passengers.per.class[passengers.per.class$Age == "Child",]
#To get the total number of women and children, I'm going to use the rbind
#function in R to add the two rows.
total.num.women.and.children <- rbind(total.num.women, total.num.children)
#sum of total num of women and children
sum.women.and.children <- sum(total.num.women.and.children$Freq)
#Now I'm going to calculate the number of men, women and children who survived
survived.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.men.sum <- sum(survived.men$Freq)
survived.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.women.sum <- sum(survived.women$Freq)
survived.children <- passengers.per.class[passengers.per.class$Age == "Child"
& passengers.per.class$Survived == "Yes",]
survived.children.sum <- sum(survived.children$Freq)
survived.women.children <- rbind(survived.women, survived.children)
survived.women.children.sum <- sum(survived.women.children$Freq)
#Now to calculate the survival rate of men, women and children
survival.rate.men <- round(survived.men.sum / sum.of.men * 100)
survival.rate.women.children <- round(survived.women.children.sum / sum.women.and.children * 100)
return(paste("Of", ticket.class, " class ", survival.rate.women.children, "% of women and children
survived and, ", survival.rate.men, "% of men survived"))
}
SurvivalRate("1st")
#8. SurvivalRate Function
SurvivalRate <- function(ticket.class) {
#defining what ticket class is
passengers.per.class <- Titanic[Titanic$Class == ticket.class,]
#next I'm going to get the total number of adult men in the ship
total.num.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult",]
#get the sum of men
sum.of.men <- sum(total.num.men$Freq)
#Now do the same thing for women
total.num.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult",]
sum.of.women <- sum(total.num.women$Freq)
#Now for children
total.num.children <- passengers.per.class[passengers.per.class$Age == "Child",]
#To get the total number of women and children, I'm going to use the rbind
#function in R to add the two rows.
total.num.women.and.children <- rbind(total.num.women, total.num.children)
#sum of total num of women and children
sum.women.and.children <- sum(total.num.women.and.children$Freq)
#Now I'm going to calculate the number of men, women and children who survived
survived.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.men.sum <- sum(survived.men$Freq)
survived.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.women.sum <- sum(survived.women$Freq)
survived.children <- passengers.per.class[passengers.per.class$Age == "Child"
& passengers.per.class$Survived == "Yes",]
survived.children.sum <- sum(survived.children$Freq)
survived.women.children <- rbind(survived.women, survived.children)
survived.women.children.sum <- sum(survived.women.children$Freq)
#Now to calculate the survival rate of men, women and children
survival.rate.men <- round(survived.men.sum / sum.of.men * 100)
survival.rate.women.children <- round(survived.women.children.sum / sum.women.and.children * 100)
return(paste("Of", ticket.class, " class ", survival.rate.women.children, "% of women and children survived and, "
, survival.rate.men, "% of men survived"))
}
SurvivalRate("1st")
#8. SurvivalRate Function
SurvivalRate <- function(ticket.class) {
#defining what ticket class is
passengers.per.class <- Titanic[Titanic$Class == ticket.class,]
#next I'm going to get the total number of adult men in the ship
total.num.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult",]
#get the sum of men
sum.of.men <- sum(total.num.men$Freq)
#Now do the same thing for women
total.num.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult",]
sum.of.women <- sum(total.num.women$Freq)
#Now for children
total.num.children <- passengers.per.class[passengers.per.class$Age == "Child",]
#To get the total number of women and children, I'm going to use the rbind
#function in R to add the two rows.
total.num.women.and.children <- rbind(total.num.women, total.num.children)
#sum of total num of women and children
sum.women.and.children <- sum(total.num.women.and.children$Freq)
#Now I'm going to calculate the number of men, women and children who survived
survived.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.men.sum <- sum(survived.men$Freq)
survived.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.women.sum <- sum(survived.women$Freq)
survived.children <- passengers.per.class[passengers.per.class$Age == "Child"
& passengers.per.class$Survived == "Yes",]
survived.children.sum <- sum(survived.children$Freq)
survived.women.children <- rbind(survived.women, survived.children)
survived.women.children.sum <- sum(survived.women.children$Freq)
#Now to calculate the survival rate of men, women and children
survival.rate.men <- round(survived.men.sum / sum.of.men * 100)
survival.rate.women.children <- round(survived.women.children.sum / sum.women.and.children * 100)
return(paste("Of", ticket.class, " class ", survival.rate.women.children, "% of women and children survived and,"
, survival.rate.men, "% of men survived"))
}
#8. SurvivalRate Function
SurvivalRate <- function(ticket.class) {
#defining what ticket class is
passengers.per.class <- Titanic[Titanic$Class == ticket.class,]
#next I'm going to get the total number of adult men in the ship
total.num.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult",]
#get the sum of men
sum.of.men <- sum(total.num.men$Freq)
#Now do the same thing for women
total.num.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult",]
sum.of.women <- sum(total.num.women$Freq)
#Now for children
total.num.children <- passengers.per.class[passengers.per.class$Age == "Child",]
#To get the total number of women and children, I'm going to use the rbind
#function in R to add the two rows.
total.num.women.and.children <- rbind(total.num.women, total.num.children)
#sum of total num of women and children
sum.women.and.children <- sum(total.num.women.and.children$Freq)
#Now I'm going to calculate the number of men, women and children who survived
survived.men <- passengers.per.class[passengers.per.class$Sex == "Male"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.men.sum <- sum(survived.men$Freq)
survived.women <- passengers.per.class[passengers.per.class$Sex == "Female"
& passengers.per.class$Age == "Adult"
& passengers.per.class$Survived == "Yes",]
survived.women.sum <- sum(survived.women$Freq)
survived.children <- passengers.per.class[passengers.per.class$Age == "Child"
& passengers.per.class$Survived == "Yes",]
survived.children.sum <- sum(survived.children$Freq)
survived.women.children <- rbind(survived.women, survived.children)
survived.women.children.sum <- sum(survived.women.children$Freq)
#Now to calculate the survival rate of men, women and children
survival.rate.men <- round(survived.men.sum / sum.of.men * 100)
survival.rate.women.children <- round(survived.women.children.sum / sum.women.and.children * 100)
return(paste("Of", ticket.class, "class", survival.rate.women.children, "% of women and children survived and,"
, survival.rate.men, "% of men survived"))
}
SurvivalRate("1st")
SurvivalRate("2nd")
SurvivalRate("3rd")
SurvivalRate("Crew")
source('~/Desktop/INFO201/a5-data-report-mnh78614/Assignment5.R')
source('~/Desktop/INFO201/a5-data-report-mnh78614/Assignment5.R')
source('~/Desktop/INFO201/a5-data-report-mnh78614/index.rmd.R')
#Congress API Key UQScpv7KWa7PJHkerZNvo2woUH8e6ZKG0KOVxdBx
my.apikey = "UQScpv7KWa7PJHkerZNvo2woUH8e6ZKG0KOVxdBx"
library(jsonlite)
library(jsonlite)
library(jsonlite)
library(jsonlite)
library(jsonlite)
library(jsonlite)
```{r setup echo = FALSE}
library(jsonlite)
library(jsonlite)
library(jsonlite)
library(jsonlite)
library("shiny")
library("rlang")
library("httr")
#install.packages("tidyr")
library("dplyr")
library("tidyr")
library("ggplot2")
library("stringr")
library("jsonlite")
source("apikey.R")
###################################################
########## Process the data #######################
###################################################
# to get a list of playlists that are ranked and active so we know
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- latest.finished.season.id[1, 1]
base.uri <- "https://www.haloapi.com/stats/h5/player-leaderboards/csr/"
# resource {seasonId}/{playlistId}
resource.uri <- paste0(latest.finished.season.id, "/c98949ae-60a8-43dc-85d7-0feb0b92e719?count=250")
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
setwd("~/Desktop/INFO201/INFO201_FINAL_BVO")
library("shiny")
library("rlang")
library("httr")
#install.packages("tidyr")
library("dplyr")
library("tidyr")
library("ggplot2")
library("stringr")
library("jsonlite")
source("apikey.R")
###################################################
########## Process the data #######################
###################################################
# to get a list of playlists that are ranked and active so we know
# which ones to display to the reader
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/playlists"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
playlists <- fromJSON(content(response, "text"))
playlists <- playlists %>%
filter(isRanked == TRUE & isActive == TRUE) %>%
select(name, description, gameMode, id)
# to get the most recent finished season
base.uri <- "https://www.haloapi.com/metadata/h5/metadata/seasons"
response <- GET(base.uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
seasons <- fromJSON(content(response, "text"))
latest.finished.season.id <- seasons %>%
filter(isActive == FALSE) %>% filter(row_number()==n()) %>% select(id)
latest.finished.season.id <- latest.finished.season.id[1, 1]
base.uri <- "https://www.haloapi.com/stats/h5/player-leaderboards/csr/"
# resource {seasonId}/{playlistId}
resource.uri <- paste0(latest.finished.season.id, "/c98949ae-60a8-43dc-85d7-0feb0b92e719?count=250")
uri <- paste0(base.uri, resource.uri)
response <- GET(uri, add_headers('Ocp-Apim-Subscription-Key' = api.key))
response <- fromJSON(content(response, "text"))
leaders <- response$Results %>% flatten()
rows.to.used <- seq(10, 169, 10)
rows.to.used <- c(1, rows.to.used)
condense.leaders <- leaders[rows.to.used, ]
gametags <- condense.leaders[["Player.Gamertag" ]]
#This will add a '+' instead of a space in the URL for the
#GetMatchID function
gametags <- gsub('([[:punct:]])|\\s+','+',gametags)
GetMatchID <- function(tag) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/players/", tag, "/matches?modes=Arena")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
return(results$Id.MatchId)
}
lapply(gametags,GetMatchID)
#For Loop to create a dataframe of gamertags by matchID
all <- lapply(gametags, GetMatchID)
all.df <- all[[1]]
for (i in 2:17) {
y <- all[[i]]
all.df <- rbind(all.df, y)
}
#putting the matchID per gamertag in a vector
match.id.gametags <- c(all.df[1:17])
GetMatchResults <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(data.frame(GamerTag = results$Player.Gamertag,
TotalKills = results$TotalKills,
TotalDeaths = results$TotalDeaths,
stringsAsFactors = FALSE))
}
GetMatchResults("c4f21ba8-08da-4c12-ac8a-f95bed97d241")
lapply(match.id.gametags, GetMatchResults)
kd <- lapply(match.id.gametags, GetMatchResults)
kd.df <- kd[[1]]
for (i in 2:17) {
y <- kd[[i]]
kd.df <- rbind(kd.df, y)
}
###################################################
########## Defining the server ####################
###################################################
my.server <- function(input, output) {
}
shinyServer(my.server)
View(kd.df)
kd.df$`Kill Death Ratio` <- (kd.df$TotalKills \ kd.df$TotalDeaths)
kd.df$`Kill Death Ratio` <- (kd.df$TotalKills / kd.df$TotalDeaths)
View(kd.df)
runApp()
runApp()
runApp()
runApp()
getwd()
runApp()
runApp('~/Desktop/INFO201/a7-data-app-mnh78614')
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
# Define UI for application that draws a histogram
my.ui <- fluidPage(
# Application title
titlePanel("HALO 5"),
h4("By: Luxi Zheng \n02/23/2018"),
# Sidebar with a slider input for number of bins
sidebarLayout(
sidebarPanel(
selectInput('player', 'Select a Player:', choices = list (as.numeric(gametags))
),
br()
# create the different tabs plus text to go along with each tab
),
mainPanel(
tabPanel("muhammad", fluid = TRUE,
mainPanel(
tabPanel("Table", tableOutput("table"),
p("The information below displays a table of the top players in Halo
who play the game mode called Arena. The information shows the Gamertag of
the player which is a unique identifier per character. The next two columns
have the total number of kills and deaths the player has in the match. Lastly,
the last column is the Kill Death Ratio of the player in that match. The Kill
Death Ratio per player in a match is important because having a high Kill Death
Ratio will allow the character to receive certain rewards in the game.")
)
)
)
)
)
)
# Define UI for application that draws a histogram
my.ui <- fluidPage(
# Application title
titlePanel("HALO 5"),
h4("By: Luxi Zheng \n02/23/2018"),
# Sidebar with a slider input for number of bins
sidebarLayout(
sidebarPanel(
selectInput('player', 'Select a Player:', choices = list (as.numeric(gametags))
),
br()
# create the different tabs plus text to go along with each tab
),
mainPanel(
tabPanel("muhammad", fluid = TRUE,
mainPanel(
tabPanel("Table", tableOutput("table"),
p("The information below displays a table of the top players in Halo
who play the game mode called Arena. The information shows the Gamertag of
the player which is a unique identifier per character. The next two columns
have the total number of kills and deaths the player has in the match. Lastly,
the last column is the Kill Death Ratio of the player in that match. The Kill
Death Ratio per player in a match is important because having a high Kill Death
Ratio will allow the character to receive certain rewards in the game.")
)
)
)
)
)
)
shinyUI(my.ui)
shinyUI(my.ui)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
print(gametags)
View(kd.df)
runApp()
runApp()
runApp()
runApp()
runApp()
print(player.selector)
View(kd.df)
runApp('~/Desktop/INFO201/a7-data-app-mnh78614')
print(country.selector)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
