#This will add a '+' instead of a space in the URL for the
#GetMatchID function
gametags <- gsub('([[:punct:]])|\\s+','+',gametags)
GetMatchID <- function(tag) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/players/", tag, "/matches?modes=Arena")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
return(results$Id.MatchId)
}
GetMatchID("Zeldun")
lapply(gametags,GetMatchID)
all <- lapply(gametags, GetMatchID)
all.df <- all[[1]]
for (i in 2:17) {
y <- all[[i]]
all.df <- rbind(all.df, y)
}
all.df[1]
rownames(all.df) <- c("match1", "match2", "match3", "match4", "match5", "match6",
"match7", "match8", "match9", "match10", "match11", "match12",
"match13", "match14", "match15", "match16", "match17", "match18",
"match19", "match20", "match21", "match22", "match23", "match24",
"match25"
)
###################################################
########## Defining the server ####################
###################################################
my.server <- function(input, output) {
}
View(all.df)
all.df[1:17]
lapply(gametags,GetMatchID)
GetMatchID("Zeldun")
match.id.gametags <- c(all.df[1:17])
print(match.id.gametags)
base.uri <- paste0("https://www.haloapi.com/stats/h5/players/Zeldun/matches?modes=Arena")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
View(results)
rm(results)
GetMatchKills <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/",id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
return(results$TotalKills)
}
lapply(match.id.gametags,GetMatchKills())
lapply(match.id.gametags,GetMatchKills)
GetMatchKills <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena",id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
return(results$TotalKills)
}
lapply(match.id.gametags,GetMatchKills)
print(api.key)
print(match.id.gametags)
GetMatchKills <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/",id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
return(results$TotalKills)
}
lapply(match.id.gametags,GetMatchKills)
GetMatchKills("c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/",id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
View(results)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
View(response)
View(results)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$results
results <- as.data.frame(results)
results <- flatten(results)
View(seasons)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$results
results <- as.data.frame(results)
results <- flatten(results)
View(results)
results <- response$results
results <- as.data.frame(results)
results <- flatten(results)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$Results
results <- as.data.frame(results)
results <- flatten(results)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
response <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- response$Results
results <- as.data.frame(results)
results <- flatten(results)
View(response)
response[["request"]]
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- response$members
results <- as.data.frame(results)
results <- flatten(results)
print(api.key)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
View(results)
results <- response$PlayerResults
results <- as.data.frame(results)
results <- flatten(results)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
View(results)
results <- response$TotalKills
results <- as.data.frame(results)
results <- flatten(results)
results[["PlayerStats"]][["TotalKills"]]
results[["PlayerStats"]]
results
#results <- response$TotalKills
results <- as.data.frame(results)
results <- flatten(results)
View(results)
results
View(response)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
View(response)
response[["request"]]
View(results)
base.uri <- paste0("https://www.haloapi.com/stats/h5/players/", tag, "/matches?modes=Arena")
base.uri <- paste0("https://www.haloapi.com/stats/h5/players/Zeldun/matches?modes=Arena")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
View(response)
View(results)
results[["Results"]]
results <- results$Results
results <- as.data.frame(results)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
View(results)
View(results)
results[["PlayerStats"]]
results[["TeamStats"]]
results <- response$PlayerStats
results <- as.data.frame(results)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
View(results)
results <- as.data.frame(results)
results <- flatten(results)
View(results)
results <- flatten(results)
View(results)
results <- results$PlayerStats.TotalKills
results <- as.data.frame(results)
results <- flatten(results)
View(results)
#GetMatchKills <- function(id) {
#Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
View(results)
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
View(results)
GetMatchKills <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(results$TotalKills)
}
GetMatchKills("c1a6c8a3-9dbc-40b0-adb3-ad72bfc30cc9")
lapply(match.id.gametags,GetMatchKills)
View(results)
GetMatchKills <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(results$Deaths)
}
GetMatchDeaths <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(results$Deaths)
}
lapply(match.id.gametags, GetMatchDeaths)
GetMatchDeaths <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(results$TotalDeaths)
}
lapply(match.id.gametags, GetMatchDeaths)
GetMatchTags <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(results$Player.Gamertag)
}
lapply(match.id.gametags, GetMatchTags)
combined.data <- lapply(match.id.gametags, GetMatchKills, match.id.gametags, GetMatchDeaths, match.id.gametags, GetMatchTags)
combined.data <- lapply(match.id.gametags, GetMatchKills,
match.id.gametags, GetMatchDeaths,
match.id.gametags, GetMatchTags)
combined.data <- lapply(match.id.gametags, GetMatchKills
{
y <- GetMatchDeaths()
Sys.sleep(0.3)
y
})
multi.sapply(match.id.gametags, GetMatchKills, GetMatchDeaths, GetMatchTags)
mapply(match.id.gametags, GetMatchKills, GetMatchDeaths, GetMatchTags)
GetMatchTags <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(results$Player.Gamertag)
return(results$TotalKills)
return(results$TotalDeaths)
}
lapply(match.id.gametags, GetMatchTags)
View(GetMatchTags)
GetMatchTags <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(results$Player.Gamertag, results$TotalKills, results$TotalDeaths)
}
lapply(match.id.gametags, GetMatchTags)
GetMatchTags <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(c(results$Player.Gamertag, results$TotalKills, results$TotalDeaths))
}
lapply(match.id.gametags, GetMatchTags)
GetMatchResults <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(c(results$Player.Gamertag, results$TotalKills, results$TotalDeaths))
}
lapply(match.id.gametags, GetMatchResults)
kd <- lapply(gametags, GetMatchResults)
json <- do.call(rbind,
lapply(paste(readLines(Usersfile, warn=FALSE),
collapse=""),
jsonlite::fromJSON))
json <- do.call(rbind,
lapply(paste(readLines(GetMatchTags, warn=FALSE),
collapse=""),
jsonlite::fromJSON))
kd <- lapply(match.id.gametags, GetMatchResults)
kd.df.df <- kd[[1]]
for (i in 2:17) {
y <- all[[i]]
kd.df <- rbind(kd.df, y)
}
rm(kd.df.df)
kd.df <- kd[[1]]
for (i in 2:17) {
y <- all[[i]]
kd.df <- rbind(kd.df, y)
}
View(kd.df)
View(kd)
for (i in 2:25) {
y <- all[[i]]
kd.df <- rbind(kd.df, y)
}
for (i in 2:20) {
y <- all[[i]]
kd.df <- rbind(kd.df, y)
}
for (i in 2:18) {
y <- all[[i]]
kd.df <- rbind(kd.df, y)
}
for (i in 2:18) {
y <- kd[[i]]
kd.df <- rbind(kd.df, y)
}
for (i in 2:17) {
y <- kd[[i]]
kd.df <- rbind(kd.df, y)
}
View(kd.df)
kd[[1]]
as.data.frame(kd)
colnames(kd) <- c("Gamer Tag", "Total Kills", "Total Deaths")
View(kd.df)
print(match.id.gametags)
GetMatchResults(c4f21ba8-08da-4c12-ac8a-f95bed97d241)
GetMatchResults("c4f21ba8-08da-4c12-ac8a-f95bed97d241")
rm(kd)
rm(kd.df)
rm(GetMatchDeaths)
rm(GetMatchKills)
kd <- lapply(match.id.gametags, GetMatchResults)
kd <- lapply(match.id.gametags, GetMatchResults)
kd.df <- kd[[1]]
for (i in 2:17) {
y <- kd[[i]]
kd.df <- rbind(kd.df, y)
}
View(kd.df)
refined.kd <- select(kd, "GamerTags" = kd[1])
refined.kd <- select(kd, "Gamer Tags" = kd[[1]])
refined.kd <- select(kd, "Gamer Tags")
View(kd.df)
View(refined.kd)
rm(refined.kd)
View(kd.df)
View(all)
View(all)
View(kd)
View(kd.df)
rm(kd.df)
kd.df <- kd[[1]]
print(kd.df)
as.data.frame(kd.df)
as.data.frame(do.call(rbind, kd.df))
is.data.frame(kd.df)
is.list(kd.df)
is.vector(kd.df)
kd.df.final <- matrix(kd.df, ncol=4, byrow=TRUE)
View(kd.df.final)
kd.df.final <- matrix(kd.df, ncol=3, byrow=TRUE)
View(kd.df.final)
kd.df.final <- matrix(kd.df, ncol=2, byrow=TRUE)
View(results)
rm(kd.df.final)
results$TotalKills
kd.df.final <- matrix(kd, ncol=2, byrow=TRUE)
View(kd.df.final)
View(kd.df.final)
View(kd.df.final)
View(kd.df.final)
kd.df.final[[1]]
kd.df.final[[2]]
View(all.df)
View(kd.df.final)
kd.df.final <- matrix(kd, ncol=2, byrow=TRUE)
kd.df <- kd[[1]]
kd <- lapply(match.id.gametags, GetMatchResults)
kd.df <- kd[[1]]
for (i in 2:17) {
y <- kd[[i]]
kd.df <- rbind(kd.df, y)
}
View(kd.df)
kd.df <- matrix(kd.df, ncol=2, byrow=TRUE)
View(kd.df)
kd.df <- matrix(kd.df, ncol=4, byrow=TRUE)
View(kd.df)
rm(kd.df.final)
kd.df <- matrix(kd.df, ncol=3, byrow=TRUE)
kd.refined <- select(kd.df, "GamerTag" == kd.df[[1]],
"Kills" == kd.df[[2]],
"Deaths" == kd.df[[3]])
kd.refined <- select(kd.df, "GamerTag" == kd.df[1],
"Kills" == kd.df[2],
"Deaths" == kd.df[3])
is.data.frame(kd.df)
rm(kd.df)
kd <- lapply(match.id.gametags, GetMatchResults)
kd.df <- kd[[1]]
for (i in 2:17) {
y <- kd[[i]]
kd.df <- rbind(kd.df, y)
}
rm(kd)
rm(kd.df)
GetMatchResults <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(data.frame(results$Player.Gamertag, results$TotalKills, results$TotalDeaths))
}
lapply(match.id.gametags, GetMatchResults)
kd <- lapply(match.id.gametags, GetMatchResults)
View(kd)
GetMatchResults <- function(id) {
Sys.sleep(1)
base.uri <- paste0("https://www.haloapi.com/stats/h5/arena/matches/", id)
response <- GET(base.uri, add_headers("Ocp-Apim-Subscription-Key" = api.key))
results <- fromJSON(content(response, "text", encoding = "ISO-8859-1"))
results <- results$PlayerStats
results <- as.data.frame(results)
results <- flatten(results)
return(data.frame(GamerTag = results$Player.Gamertag,
TotalKills = results$TotalKills,
TotalDeaths = results$TotalDeaths,
stringsAsFactors = FALSE))
}
kd <- lapply(match.id.gametags, GetMatchResults)
View(kd)
kd[[1]]
kd.df <- kd[[1]]
View(kd.df)
for (i in 2:17) {
y <- kd[[i]]
kd.df <- rbind(kd.df, y)
}
View(kd.df)
